<html>
<head>
    <title>STROUROUL.github.io</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--<link rel='stylesheet' href='/assets/font-awesome/css/all.css'> -->


    <!-- Favicon -->
    <link rel="shortcut icon" href="https://strouroul.github.io/crypto_exchange/img/favicon.png">
    <!-- Favicon -->
    <link rel="icon" href="https://strouroul.github.io/crypto_exchange/img/favicon.png">

    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/all.css">
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/regular.css"
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/solid.css"
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/brands.css"
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/light.css"
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/duotone.css"
          crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://strouroul.github.io/assets/fontawesome-6/pro/css/thin.css"
          crossorigin="anonymous"/>
</head>
<body>
<script src="https://strouroul.github.io/portifolio/home/js/iconify.min.js"></script>
<div><i class="fa-solid fa-at"></i> STROUROUL.github.io</div>


Github Build : <!--<img src="https://github.com/Strouroul/iRide/actions/workflows/node.js.yml/badge.svg">--><img src="https://strouroul.github.io/assets/images/passing_badge.svg">
<BR>Gitlab Build : <img src="https://ishopper.info:9898/gitlab/strouroul/iRide/badges/main/pipeline.svg">
<BR>
<a href="/portifolio/home.html">About Me</a><BR>


<!--
 <img src="https://strouroul.github.io/images/web_crawler_no_bg.png" style="width: 40px;height: 40px;" data-toggle="tooltip" data-html="true"
      title="Web Crawler">
 <i class="iconify" data-icon="fluent:movies-and-tv-24-regular" style="width:40px;height:40px;" data-toggle="tooltip" data-html="true"
    title="Movies & TV"></i>
 <i class="iconify" data-icon="icon-park:music" style="width:40px;height:40px;" data-toggle="tooltip" data-html="true"
    title="Music & MP3s"></i>
-->

<HR>
<span>
                <a href="/sitemap_github.xml"> <img src="https://cdn-icons-png.flaticon.com/128/11104/11104255.png" alt="" data-toggle="tooltip" data-html="true"
                                                    title="Github" style="width:25px;height: 25px;"> Index Sitemap</a> |  <a href="/sitemap_crypto.xml"> <i class="iconify" data-icon="cryptocurrency-color:usdt" style="width:40px;height:40px;" data-toggle="tooltip" data-html="true"
                                                                                                                                                            title="USDT"></i>
                                                        <i class="iconify" data-icon="cryptocurrency-color:eth" style="width:40px;height:40px;" data-toggle="tooltip" data-html="true"
                                                           title="Etherum"></i> Exchange Sitemap</a>  |  <a href="/portifolio/sitemap_portfolio.xml"> <i class="iconify" data-icon="dashicons:portfolio" style="width:25px;height:25px;" data-toggle="tooltip" data-html="true"
                                                                                                                                                         title="Portfolio"></i> Portfolio Sitemap</a>
</span>




<script>


    //   let my_status=        checkConnection("ishopper.info",443)
    //  console.log(JSON.stringify(my_status))

    let my_services = {
        smtp: {
            port: 25,
            host: "mail.ishopper.info",
            desc: "SMTP Server",
            logo: '<i class="fa-solid fa-at"></i>'
        },
        pop3: {
            port: 110,
            host: "mail.ishopper.info",
            desc: "POP3 Server",
            logo: '<img src="/assets/new_taxi_layout/pop3.jpg" style="width: 25px;height: 25px;">'
        },
        imap: {
            port: 143,
            host: "mail.ishopper.info",
            desc: "IMAP Server",
            logo: '<i class="fa-solid fa-envelope"></i>'
        },
        web: {
            url: "http://ishopper.info",
            port: 80,
            host: "ishopper.info",
            desc: "HTTP Server",
            logo: '<img src="/assets/new_taxi_layout/webserver.png" style="width: 25px;height: 25px;"> '
        },
        web_ssl: {
            url: "https://ishopper.info",
            port: 443,
            host: "ishopper.info",
            desc: "HTTPS Server",
            logo: '<i class="fa-brands fa-expeditedssl"></i>'
        },

        ws: {
            port: 3000,
            host: "ishopper.info",
            desc: "WS Server",
            logo: '<img src="/assets/new_taxi_layout/ws_network.png" style="width: 25px;height: 25px;"> '
        },
        ws_ssl: {
            port: 9898,
            host: "ishopper.info",
            desc: "WS w/ SSL Server",
            logo: '<i class="fa-brands fa-expeditedssl"></i>'
        },


        mysql: {
            port: 3306,
            host: "ishopper.info",
            desc: "MySQL Server",
            logo: '<img src="/assets/new_taxi_layout/mysql.png" style="width: 25px;height: 25px;">'
        },
        youtrack: {
            url: "https://iride.youtrack.cloud",
            port: 443,
            host: "iride.youtrack.cloud",
            desc: "YOUTRACK Server",
            logo: '<img src="/assets/new_taxi_layout/youtrack-svgrepo-com.svg" style="width: 25px;height: 25px;">'
        },
        gitlab: {
            url: "https://ishopper.info/gitlab",
            port: 443,
            host: "gitlab.ishopper.info",
            desc: "GITLAB Server",
            logo: '<i class="fa-brands fa-gitlab"></i>'
        },
    };

    getStatus();
    async function getStatus() {
        try {
            let my_status = await checkConnection("ishopper.info", 443);
            console.log(JSON.stringify(my_status));
        } catch (error) {
            console.error(error);
        }
    }

    function checkConnection(host, port, timeout) {
        timeout = timeout || 10000; // default of 10 seconds

        return new Promise(async function (resolve, reject) {
            var timer = setTimeout(function () {
                reject({status: "Offline", time: new Date().getTime()});
            }, timeout);

            let my_stats={};
            /*   await fetch(`https://${host}:${port}`)
                   .then(function (response) {
                       clearTimeout(timer);
                       if (response.ok) {
                           my_stats.https={status: "Online", time: new Date().getTime(),type:"HTTPS"};
                       } else {
                           my_stats.https=({status: "Offline", time: new Date().getTime(),type:"HTTPS"});
                       }
                   })
                   .catch(function (error) {
                       clearTimeout(timer);
                       reject(error);
                   });

               await fetch(`wss://${host}:${port}`)
                   .then(function (response) {
                       clearTimeout(timer);
                       if (response.ok) {
                           my_stats.wss=({status: "Online", time: new Date().getTime(),type:"WS"});
                       } else {
                           my_stats.wss=({status: "Offline", time: new Date().getTime(),type:"WS"});
                       }
                   })
                   .catch(function (error) {
                       clearTimeout(timer);
                       reject(error);
                   });*/
            // Prepare the fetch promises
            const fetchHttps = fetch(`https://${host}:${port}`)
                .then(response => {
                    if (response.ok) {
                        return {status: "Online", time: new Date().getTime(), type: "HTTPS"};
                    } else {
                        return {status: "Offline", time: new Date().getTime(), type: "HTTPS"};
                    }
                })
                .catch(error => {
                    return {status: "Error", time: new Date().getTime(), type: "HTTPS", error};
                });

            const fetchWss = fetch(`wss://${host}:${port}`)
                .then(response => {
                    if (response.ok) {
                        return {status: "Online", time: new Date().getTime(), type: "WS"};
                    } else {
                        return {status: "Offline", time: new Date().getTime(), type: "WS"};
                    }
                })
                .catch(error => {
                    return {status: "Error", time: new Date().getTime(), type: "WS", error};
                });

            // Wait for all fetches to complete
            Promise.allSettled([fetchHttps, fetchWss])
                .then(results => {
                    clearTimeout(timer); // Clear the timeout upon completion
                    my_stats.https = results[0]   ;  //.value || results[0].reason;
                    my_stats.wss = results[1];  //.value || results[1].reason;
                    resolve(my_stats); // Resolve with all stats
                })
                .catch(error => {
                    clearTimeout(timer); // It's good practice to clear the timer in catch too, but in this case, it's not strictly necessary since Promise.allSettled doesn't reject.
                    reject(error);
                });
        });
    }
</script>
</body>
</html>
